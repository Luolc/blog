<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>PNG文件导致的Gradle Build Error | Lolo&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="今天琢磨着把Android Studio升级到2.2.0 Preview版本试一试，然而遇上了很奇怪的错误，有关res文件。">
<meta property="og:type" content="article">
<meta property="og:title" content="PNG文件导致的Gradle Build Error">
<meta property="og:url" content="http://blog.luolc.com/2016/05/develop-android-studio-png-gradle-error/index.html">
<meta property="og:site_name" content="Lolo's Blog">
<meta property="og:description" content="今天琢磨着把Android Studio升级到2.2.0 Preview版本试一试，然而遇上了很奇怪的错误，有关res文件。">
<meta property="og:updated_time" content="2016-05-23T12:43:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PNG文件导致的Gradle Build Error">
<meta name="twitter:description" content="今天琢磨着把Android Studio升级到2.2.0 Preview版本试一试，然而遇上了很奇怪的错误，有关res文件。">
  
    <link rel="alternative" href="/atom.xml" title="Lolo&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars2.githubusercontent.com/u/13470423?v=3&amp;s=460" class="js-avatar">
			
		</a>

		<!-- change -->
		<hgroup>
		  <h1 class="header-author"><a href="/">Lolo&#39;s Blog</a></h1>
		</hgroup>

		
		<p class="header-subtitle">A fool living in the amazing world.</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="http://www.luolc.com">主站</a></li>
				        
							<li><a href="/">博客</a></li>
				        
							<li><a href="/archives">文章归档</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Luolc" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/Luolc1996" title="weibo">weibo</a>
					        
								<a class="facebook" target="_blank" href="https://www.facebook.com/Luolc" title="facebook">facebook</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Android-Studio/" style="font-size: 10px;">Android Studio</a> <a href="/tags/CAPU/" style="font-size: 20px;">CAPU</a> <a href="/tags/Hackathon/" style="font-size: 10px;">Hackathon</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Qt/" style="font-size: 10px;">Qt</a> <a href="/tags/修车/" style="font-size: 16.67px;">修车</a> <a href="/tags/开发者/" style="font-size: 10px;">开发者</a> <a href="/tags/日常/" style="font-size: 10px;">日常</a> <a href="/tags/随笔/" style="font-size: 13.33px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://nullspace.cn/">Zhaoyang</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">北京大学2014级，本科在读，专业方向GIS|Psychology. 业余编程爱好者，热爱心理学与国际政治。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Lolo&#39;s Blog</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://avatars2.githubusercontent.com/u/13470423?v=3&amp;s=460" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Lolo&#39;s Blog</h1>
			</hgroup>
			
			<p class="header-subtitle">A fool living in the amazing world.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="http://www.luolc.com">主站</a></li>
		        
					<li><a href="/">博客</a></li>
		        
					<li><a href="/archives">文章归档</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Luolc" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/Luolc1996" title="weibo">weibo</a>
			        
						<a class="facebook" target="_blank" href="https://www.facebook.com/Luolc" title="facebook">facebook</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-develop-android-studio-png-gradle-error" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/develop-android-studio-png-gradle-error/" class="article-date">
  	<time datetime="2016-05-22T16:00:00.000Z" itemprop="datePublished">2016-05-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      PNG文件导致的Gradle Build Error
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-Studio/">Android Studio</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天琢磨着把Android Studio升级到2.2.0 Preview版本试一试，然而遇上了很奇怪的错误，有关res文件。</p>
<a id="more"></a>
<p>Gradle Console Log如下<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Executing tasks: [:app:generateDebugSources, :app:generateDebugAndroidTestSources, :app:mockableAndroidJar, :app:prepareDebugUnitTestDependencies]</span><br><span class="line"></span><br><span class="line">Configuration on demand is an incubating feature.</span><br><span class="line">Incremental java compilation is an incubating feature.</span><br><span class="line"><span class="attribute">:app:preBuild</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:preDebugBuild</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:checkDebugManifest</span></span><br><span class="line"><span class="attribute">:app:preReleaseBuild</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportAnimatedVectorDrawable2330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportAppcompatV72330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportCardviewV72330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportDesign2330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportRecyclerviewV72330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportSupportV132330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportSupportV42330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComAndroidSupportSupportVectorDrawable2330Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComGithubAfollestadMaterialDialogsCore0857Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareComLuolcDevLitesyllabusview102Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareInSrainCubeUltraPtr1011Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareMeZhanghaiAndroidMaterialprogressbarLibrary115Library</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:prepareDebugDependencies</span></span><br><span class="line"><span class="attribute">:app:compileDebugAidl</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:compileDebugRenderscript</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:generateDebugBuildConfig</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:mergeDebugShaders</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:compileDebugShaders</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:generateDebugAssets</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:mergeDebugAssets</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:generateDebugResValues</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:generateDebugResources</span> UP-TO-DATE</span><br><span class="line"><span class="attribute">:app:mergeDebugResources</span></span><br><span class="line">AAPT: /Users/LuoLiangchen/AndroidStudioProjects/PKUHelper/app/src/main/res/drawable-xhdpi/ipgw<span class="emphasis">_button_</span>1<span class="emphasis">_colored.png: libpng warning: iCCP: out-of-date sRGB profile with no signature</span><br><span class="line">AAPT: /Users/LuoLiangchen/AndroidStudioProjects/PKUHelper/app/src/main/res/drawable-mdpi/icon_</span>course.png: libpng warning: iCCP: out-of-date sRGB profile with no signature</span><br><span class="line">AAPT: /Users/LuoLiangchen/AndroidStudioProjects/PKUHelper/app/src/main/res/drawable-xhdpi/ipgw<span class="emphasis">_button_</span>2<span class="emphasis">_colored.png: libpng warning: iCCP: out-of-date sRGB profile with no signature</span><br><span class="line">AAPT: /Users/LuoLiangchen/AndroidStudioProjects/PKUHelper/app/src/main/res/drawable-mdpi/error.png: libpng warning: cHRM: invalid chromaticities</span><br><span class="line">AAPT: /Users/LuoLiangchen/AndroidStudioProjects/PKUHelper/app/src/main/res/drawable-mdpi/success.png: libpng warning: cHRM: invalid chromaticities</span><br><span class="line">AAPT: libpng error: Not a PNG file</span><br><span class="line">Error: java.lang.RuntimeException: Some file crunching failed, see logs for details</span><br><span class="line">:app:mergeDebugResources FAILED</span><br><span class="line"></span><br><span class="line"></span>FAILURE: Build failed with an exception.</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>What went wrong:</span><br><span class="line">Execution failed for task <span class="emphasis">':app:mergeDebugResources'</span>.</span><br><span class="line">&gt; Error: java.lang.RuntimeException: Some file crunching failed, see logs for details</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>Try:</span><br><span class="line">Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.</span><br><span class="line"></span><br><span class="line">BUILD FAILED</span><br><span class="line"></span><br><span class="line">Total time: 6.486 secs</span><br></pre></td></tr></table></figure></p>
<p>关键点在于31行开始的问题，看样子竟然是资源文件出了错。</p>
<p>StackOverflow之，原因如下：</p>
<blockquote>
<p>This is due to adding an image in drawable which has some extension like(.jpg) and you have changed or saved that to a .png format(this error will occur while changing the image format manually without using a Editor tool). Android studio will throws a error while compiling the resource package using AAPT(Android Asset Packaging Tool), so all you need to do is use some Image Editor tools like “gimp or paint” to save the Extension accordingly. Rebuild your project once everything is done.</p>
</blockquote>
<p>所以是因为这原本是个jpg文件，然后手动改了后缀为png，Gradle Build的时候就报错了。<br>不过很奇怪为什么老版本的Android Studio没有这个问题……</p>
<p>解决方法，用任意一个图片编辑软件(我用的自己使得最多的Sketch)，把图拖进去，重新以PNG格式export即可。</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/06/develop-android-library-to-jcenter/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          发布Android Library到Jcenter
        
      </div>
    </a>
  
  
    <a href="/2016/03/capu-omamori/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">御守常伴</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="develop-android-studio-png-gradle-error" data-title="PNG文件导致的Gradle Build Error" data-url="http://blog.luolc.com/2016/05/develop-android-studio-png-gradle-error/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"luolcblog"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015-2016 Liangchen Luo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>